<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM</title>
    <!-- 
        <BOM>
            BOM(Browser Object Model)是浏览器对象模型
        <window对象>
            1. window对象是一个全局对象，可以说是JS中的顶级对象
            2. 像document、alert()、console.log()这些都是window属性，基本BOM的属性和方法都是window的
            3. 所有通过var定义在全局作用域中的变量、函数都会变成window对象的属性和方法
            4. window对象下的属性和方法调用时可以省略window
        <JS执行机制>
            为了解决页面渲染加载阻塞的问题，利用多核CPU的计算能力，H5提出Web Worker标准，允许JS脚本创建多个线程。于是，JS中出现了同步和异步
            JS执行顺序:
                ① 先执行执行栈中的同步任务
                ② 异步任务放入任务队列中
                ③ 一旦执行栈中的所有同步任务执行完毕，系统就会按次序读取任务队列中的异步任务。于是被读取的异步任务结束等待状态，进入执行栈，开始执行
            <事件循环(event loop)>
                由于主线程不断的重复获得任务、执行任务、再获取任务、再执行，这种机制被称为事件循环
        <location对象>
            loaction的数据类型是对象，它拆分并保存了URL地址的各个组成部分
            1. 常用属性和方法
                ① href属性获取完整的URL地址，对其赋值时用于地址的跳转
                ② search属性获取地址中携带的参数，符号?后面的部分
                ③ hash属性获取地址中的哈希值，符号#后面的部分
                ④ reload方法用来刷新当前页面，传入参数true时强制刷新(ctrl + f5)
        <navigator对象>
            navigator的数据类型是对象，该对象下记录了浏览器自身的相关信息
            常有属性和方法:
                1. userAgent检测浏览器的版本及平台
        <history>
            history的数据类型是对象，主要管理历史记录。该对象与浏览器地址栏的操作相对应。如前进、后退、历史记录等
            常用属性和方法:
                1. go(参数): 前进后退功能。参数如果是1前进1个页面，如果是-1后退1个页面
        <本地存储>
            1. 数据存储在用户浏览器中
            2. 设置、读取方便、甚至页面刷新不丢失数据
            3. 容量较大 sessionStorage和localStorage约5M左右
     -->
    <style>
        span {
            color: red;
        }
    </style>
</head>
<body>
    <a href="https://swiper.com.cn/">支付成功<span>5</span>秒后跳转首页</a>
    <script>
        // 1. 获取元素
        const a = document.querySelector('a')
        const span = document.querySelector('span')
        let n = 5
        // 2. 利用定时器设置数字倒计时
        let timer = setInterval(function(){
            n--
            // console.log(n);
            span.innerHTML = n
            // 3. 事件到了，自动跳转到新的页面
            if (n === 0) {
                clearInterval(timer)
                // location.href = "https://swiper.com.cn/"
                // a.click()
            }
        },1000)
        // 1. 存储一个名字
        // localStorage.setItem('键','值')
        // 本地存储只能存储字符串类型
        localStorage.setItem('uname','pink老师')
        localStorage.setItem('age',18)
        // 2. 获取名字
        console.log(localStorage.getItem('uname'))
        console.log(typeof localStorage.getItem('age')) //string
        // 3. 修改本地存储
            localStorage.setItem('age', 20)
        // 4. 删除本地存储  删除名字
        localStorage.removeItem('uname')
        localStorage.removeItem('age')

        const obj = {
            uname: 'pink老师',
            age: 18,
            gender: '男'
        }
        // 存
        // 1. 复杂数据类型 必须转换为JSON字符串存储
        localStorage.setItem('obj',JSON.stringify(obj))
        // JSON 对象  属性和值有引号  而且引号统一是双引号
        // {"uname":"pink老师","age":18,"gender":"男"}
        // 取
        // 2. 把JSON字符串转换为对象 JSON.parse()
        console.log(JSON.parse(localStorage.getItem('obj')))
        // 删
        localStorage.removeItem('obj')
    </script>
</body>
</html>